from enemies import Bandit, Rka, Vamp, Dragon
from battle import battle
from items import *
import random
import time

def intro(text):
    # –∑–∞–¥–µ—Ä–∂–∫–∞ –≤—ã–≤–æ–¥–∞ —Ç–µ—Å–∫—Ç–∞
    time.sleep(2)
    print(text)


def start_location(game):
    # –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –∏ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ –≤—ã–±–æ—Ä –Ω–∞ —ç—Ç–æ –ª–æ–∫–∞—Ü–∏–∏
    game.location = "village"
    print('\n–í–¥–∞–ª–µ–∫–µ —á—Ç–æ-—Ç–æ –≤–∏–¥–Ω–µ–µ—Ç—Å—è...')
    intro("\nüèò –ó–∞–±—Ä–æ—à–µ–Ω–Ω–∞—è –¥–µ—Ä–µ–≤–Ω—è")
    intro("–í—ã –≤—ã—Ö–æ–¥–∏—Ç–µ –∫ –ø–æ–∫–∏–Ω—É—Ç—ã–º –¥–æ–º–∞–º. –í–µ—Ç–µ—Ä –≥–æ–Ω—è–µ—Ç –ø—ã–ª—å –ø–æ –ø—É—Å—Ç—ã–º —É–ª–∏—Ü–∞–º.")
    intro("–ö–æ–≥–¥–∞-—Ç–æ –∑–¥–µ—Å—å –∫–∏–ø–µ–ª–∞ –∂–∏–∑–Ω—å, –Ω–æ —Ç–µ–ø–µ—Ä—å –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏—à—å —Ç–µ–Ω–∏ –ø—Ä–æ—à–ª–æ–≥–æ...")

    print("\n–°—Ç–∞—Ä—ã–π –¥–æ–º. –í–Ω—É—Ç—Ä–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ.")
    print("1. –û–±—ã—Å–∫–∞—Ç—å –¥–æ–º")
    print("2. –ò–¥—Ç–∏ –¥–∞–ª—å—à–µ")

    if input("> ") == "1":
        search_container(game, "—Å—Ç–∞—Ä—ã–π —Å—É–Ω–¥—É–∫")

    road(game)

def road(game):
    game.location = "road"
    print('\n–í—ã –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç–µ—Å—å –¥–∞–ª—å—à–µ.')
    intro("\nüõ£ –ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —Ç—Ä–∞–∫—Ç")
    intro("–î–æ—Ä–æ–≥–∞ —É—Ö–æ–¥–∏—Ç –≤–¥–∞–ª—å –º–µ–∂–¥—É —Ö–æ–ª–º–∞–º–∏.")
    intro("–ö–æ–≥–¥–∞-—Ç–æ –ø–æ –Ω–µ–π –º–∞—Ä—à–∏—Ä–æ–≤–∞–ª–∏ –∞—Ä–º–∏–∏, —Ç–µ–ø–µ—Ä—å –∑–¥–µ—Å—å —Ö–æ–∑—è–π–Ω–∏—á–∞—é—Ç —Ä–∞–∑–±–æ–π–Ω–∏–∫–∏.")

    print("\n–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–±–æ–π–Ω–∏–∫!")
    # –±–æ–π —Å –≤—Ä–∞–≥–æ–º –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –Ω–∞ –ª–æ–∫–∞—Ü–∏–∏
    battle(game, Bandit())

    camp(game)

def camp(game):
    game.location = "camp"
    print('\n–í —ç—Ç–æ–π –º–µ—Å—Ç–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –±—ã—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω–µ–π')
    intro("\n‚õ∫Ô∏è –õ–∞–≥–µ—Ä—å –Ω–∞—ë–º–Ω–∏–∫–æ–≤")
    intro("–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π –ª–∞–≥–µ—Ä—å. –ü–æ—Ç—É—Ö—à–∏–µ –∫–æ—Å—Ç—Ä—ã –µ—â—ë —Ö—Ä–∞–Ω—è—Ç —Ç–µ–ø–ª–æ.")
    intro("–í –≤–æ–∑–¥—É—Ö–µ –≤–∏—Ç–∞–µ—Ç –æ—â—É—â–µ–Ω–∏–µ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞.")

    print("\n–ó–¥–µ—Å—å —Å—Ç–æ–∏—Ç –ø–æ–∫–æ—Å–∏–≤—à–∏–π—Å—è —à–∫–∞—Ñ.")
    print("1. –û–±—ã—Å–∫–∞—Ç—å —à–∫–∞—Ñ")
    print("2. –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –ø–ª–µ–Ω–Ω–∏–∫–æ–º")

    choice = input("> ")
    # –≤—ã–±–æ—Ä —Å —Ä–∞–∑–≤–∏–ª–∫–æ–π, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–µ—á–µ—Ç –∑–∞ —Å–æ–±–æ–π –æ–¥–Ω—É –∏–∑ –∫–æ–Ω—Ü–æ–≤–æ–∫
    if choice == "1":
        from items import search_container
        # –æ–±—ã—Å–∫–∏–≤–∞–µ–º —à–∫–∞—Ñ –≤ –ø–æ–∏—Å–∫–µ –ª—É—Ç–∞
        search_container(game, "—Å—Ç–∞—Ä—ã–π —à–∫–∞—Ñ")
        forest(game)
    elif choice == "2":
        # —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ–º —Å –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–µ–º
        print("–°—Ç–∞—Ä–∏–∫: ¬´–ö–æ—Ä–æ–ª—å –∂–∏–≤. –í—ã–±–æ—Ä –∑–∞ —Ç–æ–±–æ–π‚Ä¶¬ª")
        print("1. –ü–æ–º–æ—á—å –∫–æ—Ä–æ–ª—é")
        print("2. –ó–∞–±—Ä–∞—Ç—å –≤–ª–∞—Å—Ç—å")

        sub_choice = input("> ")

        if sub_choice == "1":
            # –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–≥—Ä—ã
            print("\nü§ù –í—ã –ø–æ–º–æ–≥–∞–µ—Ç–µ –ø–ª–µ–Ω–Ω–∏–∫—É. –û–Ω –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∏ –¥–∞—ë—Ç –≤–∞–º –ø–æ–¥—Å–∫–∞–∑–∫—É –∫–∞–∫ –Ω–∞–π—Ç–∏ —Å–µ–∫—Ä–µ—Ç–Ω—É—é –ª–æ–∫–∞—Ü–∏—é.")
            game.flags.add("help_king")
            forest(game)

        elif sub_choice == "2":
            # –æ–¥–Ω–∞ –∏–∑ –∫–æ–Ω—Ü–æ–≤–æ–∫
            print("\nüòà –í—ã –ø—Ä–∏–º–∫–Ω—É–ª–∏ –∫ —Ç–µ–º–Ω—ã–º —Å–∏–ª–∞–º!")
            print("üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.")
            exit()

        else:
            print(" –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–ª–µ–Ω–Ω–∏–∫ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–∫–∞–∑–∞–ª.")
            forest(game)

    else:
        print(" –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä, –∏–¥—ë–º –¥–∞–ª—å—à–µ...")
        forest(game)


def forest(game):
    game.location = "forest"
    print('\n–õ–∞–Ω–¥—à–∞—Ñ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –∏ —Ç—É—Ç –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è')
    intro("\nüå≤ –ì–ª—É—Ö–æ–π –ª–µ—Å")
    intro("–î–µ—Ä–µ–≤—å—è —Å–º—ã–∫–∞—é—Ç—Å—è –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π, —Å–≤–µ—Ç –ø–æ—á—Ç–∏ –Ω–µ –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç —Å–∫–≤–æ–∑—å –ª–∏—Å—Ç–≤—É.")
    intro("–ö–∞–∂–¥—ã–π —à–∞–≥ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–º...")

    print("\n–´—Ä–∫–∞ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –¥–µ—Ä–µ–≤—å–µ–≤!")
    battle(game, Rka())

    ruins(game)


def ruins(game):
    game.location = "ruins"
    print('\n–í–∞—à –≥–µ—Ä–æ–π —É–∂–µ –¥–∞–ª–µ–∫–æ –∑–∞–±—Ä–∞–ª—Å—è...')
    intro("\nüèö –î—Ä–µ–≤–Ω–∏–µ —Ä—É–∏–Ω—ã")
    intro("–ö–∞–º–µ–Ω–Ω—ã–µ —Å—Ç–µ–Ω—ã –ø–æ–∫—Ä—ã—Ç—ã –º—Ö–æ–º –∏ —Ç—Ä–µ—â–∏–Ω–∞–º–∏.")
    intro("–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –¥—Ä–µ–≤–Ω–µ–π —Å–∏–ª—ã, –¥—Ä–µ–º–ª—é—â–µ–π –≤ —ç—Ç–∏—Ö –º–µ—Å—Ç–∞—Ö.")

    print("\n–í—ã –≤–∏–¥–∏—Ç–µ –∞–ª—Ç–∞—Ä—å –∏ —Å—É–Ω–¥—É–∫.")
    print("1. –û–±—ã—Å–∫–∞—Ç—å —Å—É–Ω–¥—É–∫")
    print("2. –û—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—Ç–∞—Ä—å")

    if input("> ") == "1":
        search_container(game, "–∫–∞–º–µ–Ω–Ω—ã–π —Å—É–Ω–¥—É–∫")
    else:
        game.flags.add("altar_seen")
        # —Ñ–ª–∞–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ü–æ–≤–∫–∏
        print("–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –¥—Ä–µ–≤–Ω—é—é —Å–∏–ª—É...")

    castle_gate(game)


def castle_gate(game):
    game.location = "gate"
    print('\n–°–∫–æ—Ä–æ —ç—Ç–æ –≤—Å–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è')
    intro("\nüè∞ –í–æ—Ä–æ—Ç–∞ –ß—ë—Ä–Ω–æ–≥–æ –∑–∞–º–∫–∞")
    intro("–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –≤–æ–∑–≤—ã—à–∞—é—Ç—Å—è –∏—Å–ø–æ–ª–∏–Ω—Å–∫–∏–µ –≤–æ—Ä–æ—Ç–∞.")
    intro("–û—Ç—Å—é–¥–∞ –µ—â—ë –Ω–∏–∫—Ç–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª—Å—è...")

    print("\n–í–∞–º–ø–∏—Ä —Ö–æ—á–µ—Ç –≤—ã–ø–∏—Ç—å –≤—Å—é –í–∞—à—É –∫—Ä–æ–≤—å!")
    battle(game, Vamp())

    if random.randint(1, 100) <= 40:
        healing_location(game)
    else:
        intro('–í—ã –æ–±–æ—à–ª–∏ –æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç–∏, –Ω–æ —Ü–µ–ª–µ–±–Ω—ã–π –≤–æ–¥–æ–ø–∞–¥ —Ç–∞–∫ –∏ –Ω–µ –Ω–∞—à–ª–∏.')
        intro('–ì–µ—Ä–æ–π —Å –æ–≥–æ—Ä—á–µ–Ω–∏–µ–º –≤—ã–¥–∞–µ—Ç:')
        print('–¢—Ñ—É. –°–æ–≤—Ä–∞–ª —ç—Ç–æ—Ç —Å—Ç–∞—Ä—ã–π')

    final_location(game)

def healing_location(game):
    game.location = "healing"

    intro("\nüíß –¶–µ–ª–µ–±–Ω—ã–π –≤–æ–¥–æ–ø–∞–¥")
    intro("–í—ã —Å–ª—ã—à–∏—Ç–µ —à—É–º –≤–æ–¥—ã –µ—â—ë –∏–∑–¥–∞–ª–µ–∫–∞.")
    intro("–õ–µ–≥–µ–Ω–¥—ã –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ —ç—Ç–æ—Ç –≤–æ–¥–æ–ø–∞–¥ –∏—Å—Ü–µ–ª—è–µ—Ç –¥–∞–∂–µ —Å–º–µ—Ä—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–Ω—ã...")

    game.hero.hp = game.hero.max_hp
    print(f"\n‚ù§Ô∏è –í—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—Ü–µ–ª–µ–Ω—ã! HP: {game.hero.hp}")

# —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–Ω—Ü–æ–≤–∫–∞–º–∏ –≤ –∑–∞–≤-—Ç–∏ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤—ã–±–æ—Ä–æ–≤

def final_location(game):
    game.location = "final" # –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
    print('\n...')
    intro("\nüî• –¢—Ä–æ–Ω–Ω—ã–π –∑–∞–ª –¥—Ä–∞–∫–æ–Ω–∞")
    intro("–ñ–∞—Ä –æ–±–∂–∏–≥–∞–µ—Ç –∫–æ–∂—É, –≤–æ–∑–¥—É—Ö –¥—Ä–æ–∂–∏—Ç –æ—Ç –¥—Ä–µ–≤–Ω–µ–π –º–∞–≥–∏–∏.")
    intro("–í–∞—à –ø—É—Ç—å –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –∫–æ–Ω—Ü—É. –û—Ç—Å—Ç—É–ø–∞—Ç—å –±–æ–ª—å—à–µ –Ω–µ–∫—É–¥–∞.")

    intro("\n–ì–µ—Ä–æ–π –¥–µ–ª–∞–µ—Ç —à–∞–≥ –≤–ø–µ—Ä—ë–¥ –∏ –∫—Ä–∏—á–∏—Ç:")
    print("¬´–¢–í–û–Å –ü–†–ê–í–õ–ï–ù–ò–ï –û–ö–û–ù–ß–ï–ù–û. –°–ï–ì–û–î–ù–Ø –í–°–ï –ù–ê–ö–û–ù–ï–¶ –ó–ê–í–ï–†–®–ò–¢–°–Ø!!!!.¬ª")

    empower_hero(game)
    battle(game, Dragon())

    ending(game)

def empower_hero(game):
    # –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –≥–µ—Ä–æ—è
    hero = game.hero
    hero.hp = hero.hp
    hero.power += 15
    hero.crit += 20
    hero.dodge += 15

    intro("\n‚ú® –î—Ä–µ–≤–Ω—è—è —Å–∏–ª–∞ –Ω–∞–ø–æ–ª–Ω—è–µ—Ç –≤–∞—Å!")
    print("–í–∞—à–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å—Ç–∞–ª–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—à–µ!")

def ending(game):
    print("\nüëë –§–∏–Ω–∞–ª")

    if "help_king" in game.flags: # –µ—Å–ª–∏ —Ñ–ª–∞–≥, —Ç–æ –≤—ã–≤–æ–¥ –∫ –∫–æ–Ω—Ü–æ–≤–∫–µ
        intro("–í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ —Ç—Ä–æ–Ω –∑–∞–∫–æ–Ω–Ω–æ–º—É –∫–æ—Ä–æ–ª—é.")
        print("–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ —Å–ø–∞—Å–µ–Ω–æ!!! –ö–æ—Ä–æ–ª—å –≤ –∑–Ω–∞–∫ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –æ—Ç–¥–∞–µ—Ç –≤–∞–º –≤ –∂—ë–Ω—ã —Å–≤–æ—é –¥–æ—á—å.")
    elif "altar_seen" in game.flags: # –µ—Å–ª–∏ —Ñ–ª–∞–≥, —Ç–æ –≤—ã–≤–æ–¥ –∫ –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ü–æ–≤–∫–µ
        intro("–í—ã –∑–∞–±–∏—Ä–∞–µ—Ç–µ –¥—Ä–µ–≤–Ω—é—é —Å–∏–ª—É —Å–µ–±–µ.")
        intro("–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –í–∞—à–∞ –Ω–æ–≤–∞—è —ç—Ä–∞ –ø—Ä–∞–≤–ª–µ–Ω–∏—è...")
        intro('–ù–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç –∫ —á–µ–º—É —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç.')
    else:
        intro("–î—Ä–∞–∫–æ–Ω –ø–æ–≤–µ—Ä–∂–µ–Ω, –Ω–æ –º–∏—Ä –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞.")

    print("\nüéâ –ö–û–ù–ï–¶ –ò–ì–†–´")
    exit() # –∑–∞–≤–µ—Ä—à–∞—é—â–∞—è —Ä–µ—á—å –∏ –≤—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã

def resume_location(game):
    # –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–∫–∞—Ü–∏–π, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    loc = game.location
    if loc == "village":
        start_location(game)
    elif loc == "road":
        road(game)
    elif loc == "camp":
        camp(game)
    elif loc == "forest":
        forest(game)
    elif loc == "ruins":
        ruins(game)
    elif loc == "gate":
        castle_gate(game)
    elif loc == "final":
        final_location(game)
    else:
        print(" –õ–æ–∫–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ò–≥—Ä–∞ –Ω–∞—á–Ω–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞.")
        from main import main
        main()