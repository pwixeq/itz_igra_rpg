import random


# –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –ø—Ä–µ–¥–º–µ—Ç–æ–≤
class Item:
    def __init__(self, name):
        # –∑–∞–¥–∞—ë–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
        self.name = name


class Potion(Item):
    def use(self, game):
        # –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–µ–ª–∏–π
        pass


class Equipment(Item):
    def __init__(self, name, slot, power=0, defense=0, crit=0, dodge=0):
        super().__init__(name)

        # —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ª–æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ ("–æ—Ä—É–∂–∏–µ" –∏–ª–∏ "–±—Ä–æ–Ω—è")
        self.slot = slot

        # —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –±–æ–Ω—É—Å—ã –ø—Ä–µ–¥–º–µ—Ç–∞
        self.power = power  # —Å–∏–ª–∞ –∞—Ç–∞–∫–∏
        self.defense = defense  # –∑–∞—â–∏—Ç–∞
        self.crit = crit  # –∫—Ä–∏—Ç —É–¥–∞—Ä
        self.dodge = dodge  # —É–∫–ª–æ–Ω–µ–Ω–∏–µ

        # –µ—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç –±—Ä–æ–Ω—è, –¥–æ–±–∞–≤–ª—è–µ–º –µ–π –ø—Ä–æ—á–Ω–æ—Å—Ç—å
        if self.slot == "armor":
            # –Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å —Ä–∞–≤–Ω–∞ –±–∞–∑–æ–≤–æ–π –ø–ª—é—Å –±–æ–Ω—É—Å –∑–∞—â–∏—Ç—ã
            self.durability = 10 + self.defense


# –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–π —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
def generate_equipment():
    # –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Å–ª–æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
    slot = random.choice(["weapon", "armor"])

    # —Å–æ–∑–¥–∞—ë–º –∏–º—è –ø—Ä–µ–¥–º–µ—Ç–∞ –∏ —Ä–∞–Ω–¥–æ–º–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    if slot == "weapon":
        name = random.choice(["–ö–æ—Ä–æ—Ç–∫–∏–π –º–µ—á", "–°—Ç–∞—Ä—ã–π –∫–ª–∏–Ω–æ–∫", "–°–µ–∫–∏—Ä–∞"])
        power = random.randint(5, 15)  # —Å–∏–ª–∞ –æ—Ä—É–∂–∏—è
        crit = random.randint(5, 15)  # —à–∞–Ω—Å –∫—Ä–∏—Ç–∞
    else:
        name = random.choice(["–õ—ë–≥–∫–∞—è –±—Ä–æ–Ω—è", "–ö–æ–∂–∞–Ω—ã–π –¥–æ—Å–ø–µ—Ö", "–ü–ª–∞—Å—Ç–∏–Ω—á–∞—Ç—ã–π –¥–æ—Å–ø–µ—Ö"])
        defense = random.randint(5, 15)  # –∑–∞—â–∏—Ç–∞ –±—Ä–æ–Ω–∏
        dodge = random.randint(5, 15)  # —É–∫–ª–æ–Ω–µ–Ω–∏–µ

    # —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
    eq = Equipment(name, slot, power, defense, crit, dodge)
    return eq


# –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–π–¥–µ–Ω–Ω–æ–π —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
def found_equipment(game, eq=None):
    # –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ –Ω–∏—á–µ–≥–æ, —Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ
    if not eq:
        eq = generate_equipment()

    # —Å–æ–æ–±—â–∞–µ–º –∏–≥—Ä–æ–∫—É –æ –Ω–∞—Ö–æ–¥–∫–µ
    print(f"\n–í—ã –Ω–∞—à–ª–∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É: {eq.name}")
    print(f"–°–∏–ª–∞: {eq.power}, –ó–∞—â–∏—Ç–∞: {eq.defense}, –ö—Ä–∏—Ç: {eq.crit}, –£–∫–ª–æ–Ω–µ–Ω–∏–µ: {eq.dodge}")
    print("1. –ù–∞–¥–µ—Ç—å\n2. –ü–æ–ª–æ–∂–∏—Ç—å –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å")

    # –ø–æ–ª—É—á–∞–µ–º –≤—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞
    choice = input("> ")
    if choice == "1":
        # –∏–≥—Ä–æ–∫ —Ä–µ—à–∏–ª –Ω–∞–¥–µ—Ç—å –ø—Ä–µ–¥–º–µ—Ç
        equip_item(game, eq)
    else:
        # –∫–ª–∞–¥—ë–º –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        game.inventory.append(eq)
        print(f"{eq.name} –ø–æ–ª–æ–∂–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.")


def equip_item(game, item):
    # –∫—É–¥–∞ –±—É–¥–µ–º —Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç
    slot = item.slot
    hero = game.hero

    # —Å–º–æ—Ç—Ä–∏–º –Ω–∞–¥–µ—Ç–æ –ª–∏ —á—Ç–æ-—Ç–æ
    current = hero.equipment.get(slot)

    if current:
        # —Å–ª–æ—Ç —É–∂–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–µ–¥–º–µ—Ç–æ–º
        print(f"\n–°–ª–æ—Ç {slot} —É–∂–µ –∑–∞–Ω—è—Ç!")
        print(
            f"–°–µ–π—á–∞—Å –Ω–∞–¥–µ—Ç–æ: {current.name} | –°–∏–ª–∞:{current.power} –ó–∞—â–∏—Ç–∞:{current.defense} –ö—Ä–∏—Ç:{current.crit} –£–∫–ª–æ–Ω–µ–Ω–∏–µ:{current.dodge}")
        print(
            f"–ù–∞–π–¥–µ–Ω–∞ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞: {item.name} | –°–∏–ª–∞:{item.power} –ó–∞—â–∏—Ç–∞:{item.defense} –ö—Ä–∏—Ç:{item.crit} –£–∫–ª–æ–Ω–µ–Ω–∏–µ:{item.dodge}")
        print("–•–æ—Ç–∏—Ç–µ –ø–æ–º–µ–Ω—è—Ç—å —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É? (1 - –î–∞, 2 - –ù–µ—Ç)")

        # –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–º–µ–Ω—ã
        choice = input("> ")
        if choice == "1":
            # –ø–µ—Ä–µ–Ω–æ—Å–∏–º —Å—Ç–∞—Ä—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
            print(f"üì¶ {current.name} –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.")
            game.inventory.append(current)

            # –Ω–∞–¥–µ–≤–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç
            hero.equipment[slot] = item
            apply_equipment_effect(hero, item)
            print(f"–í—ã –Ω–∞–¥–µ–ª–∏ {item.name}.")
        else:
            # –Ω–æ–≤–∞—è —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
            print(f"üì¶ {item.name} –ø–æ–ª–æ–∂–µ–Ω–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.")
            game.inventory.append(item)
    else:
        # –µ—Å–ª–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π —Å–ª–æ—Ç, —Ç–æ —Å—Ä–∞–∑—É –æ–¥–µ–≤–∞–µ–º
        hero.equipment[slot] = item
        apply_equipment_effect(hero, item)
        print(f"–í—ã –Ω–∞–¥–µ–ª–∏ {item.name}.")


# –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
def apply_equipment_effect(hero, item):
    # –ø—Ä–∏–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–∞ –≥–µ—Ä–æ—é
    hero.power += item.power
    hero.crit += item.crit
    hero.dodge += item.dodge
    # –µ—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç –±—Ä–æ–Ω—è, —Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–∞—â–∏—Ç—É
    if item.slot == "armor":
        hero.temp_defense += item.defense
        if not hasattr(item, "durability"):
            # –±–∞–∑–æ–≤–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å –±—Ä–æ–Ω–∏
            item.durability = 10 + item.defense


# –∑–µ–ª—å–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è
class HealPotion(Potion):
    def __init__(self):
        # –∑–∞–¥–∞—ë–º –Ω–∞–∑–≤–∞–Ω–∏–µ
        super().__init__("–ó–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è")
        self.heal = 60  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è

    def use(self, game):
        # –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–¥–æ—Ä–æ–≤—å–µ –≥–µ—Ä–æ—é
        hero = game.hero
        hero.hp += self.heal
        if hero.hp > hero.max_hp:
            hero.hp = hero.max_hp
        print(f"–í—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ {self.heal} HP!")


# –∑–µ–ª—å–µ –ø–æ–≤—ã—à–µ–Ω–∏—è —Å–∏–ª—ã
class StrengthPotion(Potion):
    def __init__(self):
        # —Å–æ–∑–¥–∞—ë–º –∑–µ–ª—å–µ —Å–∏–ª—ã
        super().__init__("–ó–µ–ª—å–µ —Å–∏–ª—ã")

    def use(self, game):
        # –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —Å–∏–ª—É –≥–µ—Ä–æ—è –Ω–∞ 10 –µ–¥–∏–Ω–∏—Ü
        game.effects.append({"type": "strength", "value": 10, "turns": 2})
        print("–£—Ä–æ–Ω —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ 10!")


# –∑–µ–ª—å–µ –∫—Ä–∏—Ç —É–¥–∞—Ä–∞
class CritPotion(Potion):
    def __init__(self):
        # —Å–æ–∑–¥–∞–µ–º –∑–µ–ª—å–µ –∫—Ä–∏—Ç–∞
        super().__init__("–ó–µ–ª—å–µ –∫—Ä–∏—Ç–∞")

    def use(self, game):
        # –≤—Ä–µ–º–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∞–Ω—Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ –Ω–∞ 20%
        game.effects.append({"type": "crit_up", "value": 20, "turns": 2})
        print("–®–∞–Ω—Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ 20%!")
class DodgePotion(Potion):
    def __init__(self):
        # –∞—Ç—Ä–∏–±—É—Ç—ã —Ä–æ–¥. –∫–ª–∞—Å—Å–∞
        super().__init__("–ó–µ–ª—å–µ —É–∫–ª–æ–Ω–µ–Ω–∏—è")


    def use(self, game):
        # –¥–æ–±–∞–≤–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è —à–∞–Ω—Å–∞ —É–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–∞ 20%
        game.effects.append({"type": "dodge_up", "value": 20, "turns": 2})
        print(" –®–∞–Ω—Å —É–∫–ª–æ–Ω–µ–Ω–∏—è —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ 20%!")


class PoisonPotion(Potion):
    def __init__(self):
        # —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∑–µ–ª—å—è —è–¥–∞
        super().__init__("–ó–µ–ª—å–µ —è–¥–∞")


    def use(self, game):
        # –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç —è–¥ –Ω–∞ –≤—Ä–∞–≥–∞
        game.effects.append({"type": "poison", "damage": 10, "turns": 3})
        print("Ô∏è –í—Ä–∞–≥ –æ—Ç—Ä–∞–≤–ª–µ–Ω (10 —É—Ä–æ–Ω–∞ –∑–∞ —Ä–∞—É–Ω–¥)!")


class BleedPotion(Potion):
    def __init__(self):
        # —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç –∑–µ–ª—å—è –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è
        super().__init__("–ó–µ–ª—å–µ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è")


    def use(self, game):
        # –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–Ω–∏–º–∞–µ—Ç 5% –∑–¥–æ—Ä–æ–≤—å—è –≤—Ä–∞–≥–∞
        game.effects.append({"type": "bleed", "percent": 0.05, "turns": 3})
        print(" –í—Ä–∞–≥ –∏—Å—Ç–µ–∫–∞–µ—Ç –∫—Ä–æ–≤—å—é (5% HP –∑–∞ —Ä–∞—É–Ω–¥)!")



# –ø–æ–∏—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
def search_container(game, name):
    # –æ–±—ã—Å–∫ —Å—É–Ω–¥—É–∫–æ–≤/—à–∫–∞—Ñ–æ–≤
    import random
    print(f"\n –í—ã –æ–±—ã—Å–∫–∏–≤–∞–µ—Ç–µ {name}...")
    roll = random.randint(1, 100)  # —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—ã–ø–∞–¥–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞

    # —Ç–∞–±–ª–∏—Ü–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    if roll <= 25:
        item = HealPotion()   # –ª–µ—á–µ–±–Ω–æ–µ –∑–µ–ª—å–µ
    elif roll <= 45:
        item = StrengthPotion()  # –∑–µ–ª—å–µ —Å–∏–ª—ã
    elif roll <= 60:
        item = CritPotion()     # –∑–µ–ª—å–µ –∫—Ä–∏—Ç–∞
    elif roll <= 70:
        item = DodgePotion()    # –∑–µ–ª—å–µ —É–∫–ª–æ–Ω–µ–Ω–∏—è
    elif roll <= 80:
        item = PoisonPotion()   # —è–¥–æ–≤–∏—Ç–æ–µ –∑–µ–ª—å–µ
    elif roll <= 90:
        item = BleedPotion()    # –∫—Ä–æ–≤–æ—Ç–æ—á–∞—â–µ–µ –∑–µ–ª—å–µ
    else:
        item = generate_equipment()  # –≤—ã–¥–∞—ë—Ç –ø—Ä–µ–¥–º–µ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏

    # –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—à–ª–∏ –ª–∏ –º—ã —ç–∫–∏–ø –∏–ª–∏ –æ–±—ã—á–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç
    if isinstance(item, Equipment):
        found_equipment(game, item)  # –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—É—é —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É –æ—Ç–¥–µ–ª—å–Ω–æ
    else:
        game.inventory.append(item)  # –¥–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–∞
        print(f" –ù–∞–π–¥–µ–Ω–æ: {item.name}")  # –≤—ã–≤–æ–¥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞


def drop_loot(game):
    # –ª—É—Ç –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã
    import random
    roll = random.randint(1, 100)  # –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç –≤—ã–ø–∞–ª —Å–ª—É—á–∞–π–Ω–æ

    # –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ—Å–ª–µ –±–æ—è
    if roll <= 30:
        eq = generate_equipment()  # –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É
        found_equipment(game, eq)  # –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –µ—ë –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º
    elif roll <= 50:
        item = HealPotion()      # –ª–µ—á–µ–Ω–∏–µ
        game.inventory.append(item)
        print(" –í—ã–ø–∞–ª–æ: –ó–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è")
    elif roll <= 60:
        item = StrengthPotion()  # —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –≥–µ—Ä–æ—è
        game.inventory.append(item)
        print(" –í—ã–ø–∞–ª–æ: –ó–µ–ª—å–µ —Å–∏–ª—ã")
    elif roll <= 75:
        item = PoisonPotion()    # –æ—Ç—Ä–∞–≤–ª—è–µ—Ç –≤—Ä–∞–≥–∞
        game.inventory.append(item)
        print(" –í—ã–ø–∞–ª–æ: –ó–µ–ª—å–µ —è–¥–∞")
    elif roll <= 80:
        item = BleedPotion()     # –Ω–∞–Ω–æ—Å–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–π —É—Ä–æ–Ω –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫—É
        game.inventory.append(item)
        print(" –í—ã–ø–∞–ª–æ: –ó–µ–ª—å–µ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è")
    else:
        # –∏–Ω–æ–≥–¥–∞ –≤—ã–ø–∞–¥–∞–µ—Ç –¥–æ–ø —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞
        eq = generate_equipment()
        found_equipment(game, eq)
